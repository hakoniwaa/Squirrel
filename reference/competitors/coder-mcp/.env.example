# coder-mcp Environment Configuration
# Copy this file to .env and fill in your values

# === Core Configuration ===
# Environment: development, staging, production
ENVIRONMENT=development

# Debug mode (set to false in production)
DEBUG=true

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# === Redis Configuration ===
# Redis connection settings
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_SSL=false

# Redis connection pool settings
REDIS_MAX_CONNECTIONS=50
REDIS_CONNECTION_TIMEOUT=20
REDIS_SOCKET_TIMEOUT=5

# === OpenAI Configuration ===
# Required for vector embeddings
OPENAI_API_KEY=your_openai_api_key_here

# OpenAI model settings
OPENAI_EMBEDDING_MODEL=text-embedding-ada-002
OPENAI_CHAT_MODEL=gpt-4o

# === Vector Search Configuration ===
# Embedding cache settings
EMBEDDING_CACHE_TTL=86400  # 24 hours in seconds
EMBEDDING_DIMENSION=3072    # Ada-002 dimensions
MAX_EMBEDDING_BATCH_SIZE=100

# === MCP Server Configuration ===
# Server settings
MCP_SERVER_NAME=coder-mcp
MCP_SERVER_VERSION=5.0.0
MCP_MAX_REQUEST_SIZE=10485760  # 10MB

# === Security Configuration ===
# API rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# Path restrictions (comma-separated)
ALLOWED_PATH_PREFIXES=/home/user/projects,/workspace
DISALLOWED_PATH_PATTERNS=*.env,*.key,*.pem,**/secrets/**

# === Performance Configuration ===
# Cache settings
CACHE_ENABLED=true
CACHE_TTL_SECONDS=3600
CONTEXT_CACHE_SIZE_MB=100

# Threading/async settings
MAX_WORKERS=4
ASYNC_TIMEOUT_SECONDS=30

# === Analysis Configuration ===
# Code analysis settings
MAX_FILE_SIZE_MB=10
ANALYSIS_TIMEOUT_SECONDS=60
AST_CACHE_ENABLED=true

# Complexity thresholds
MAX_FUNCTION_COMPLEXITY=10
MAX_CLASS_COMPLEXITY=20
MAX_FILE_LENGTH=1000

# === Development Tools ===
# Only used in development
DEV_AUTO_RELOAD=true
DEV_PROFILING_ENABLED=false
DEV_MEMORY_PROFILING=false

# === Monitoring Configuration ===
# Metrics and monitoring
METRICS_ENABLED=true
METRICS_EXPORT_INTERVAL=60  # seconds

# Health check settings
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=5

# === Feature Flags ===
# Enable/disable features
FEATURE_SEMANTIC_SEARCH=true
FEATURE_CODE_GENERATION=true
FEATURE_DEPENDENCY_ANALYSIS=true
FEATURE_SECURITY_SCANNING=true
FEATURE_AUTO_CONTEXT_UPDATE=true

# === External Integrations ===
# GitHub integration (optional)
GITHUB_TOKEN=
GITHUB_API_TIMEOUT=30

# Slack notifications (optional)
SLACK_WEBHOOK_URL=
SLACK_NOTIFICATIONS_ENABLED=false

# === Storage Configuration ===
# File storage settings
STORAGE_BACKEND=local  # local, s3
STORAGE_PATH=/tmp/coder-mcp
MAX_STORAGE_SIZE_GB=10

# S3 settings (if using S3 backend)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_S3_BUCKET=
AWS_S3_REGION=us-east-1

# === Telemetry Configuration ===
# Anonymous usage statistics
TELEMETRY_ENABLED=false
TELEMETRY_ENDPOINT=

# === Custom Configuration ===
# Add your own configuration variables here
CUSTOM_WORKSPACE_ROOT=
CUSTOM_PROJECT_NAME=
